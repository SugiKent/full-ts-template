---
name: プロジェクト初期化: ドキュメント整合性チェック
description: docs/内のドキュメントがPROJECT.mdの要件に適合しているかを検証します
category: プロジェクトセットアップ
tags: [setup, docs, validation]
---

**ガードレール**
- PROJECT.md を信頼できる情報源（Single Source of Truth）として扱う
- ドキュメントの変更は必ずユーザーの承認を得てから行う
- 技術的な判断が必要な場合は選択肢を提示する
- すべて日本語で対話する

**概要**
このコマンドは、`PROJECT.md` で定義されたプロジェクト要件に対して、
`docs/` ディレクトリ内の技術ドキュメントが適切に対応しているかを検証します。

**ステップ**

1. **PROJECT.md の解析**
   - `PROJECT.md` を読み込む
   - 以下の情報を抽出する：
     - サービス概要と主要機能
     - ターゲットユーザーと画面一覧
     - 機能要件と受け入れ条件
     - ビジネス制約（運用時間、法規制など）

2. **docs/ ディレクトリの確認**
   - 以下のファイルを読み込む：
     - `docs/ARCHITECTURE.md` - 全体アーキテクチャ
     - `docs/BACKEND.md` - バックエンド規約
     - `docs/FRONTEND.md` - フロントエンド規約
     - `docs/AUTH.md` - 認証設計
     - `docs/DATABASE.md` - データベース設計
     - `docs/TEST.md` - テスト戦略

3. **整合性チェック**
   各ドキュメントについて以下を検証する：

   **ARCHITECTURE.md**
   - [ ] PROJECT.md の機能要件をカバーする技術構成になっているか
   - [ ] スケーラビリティ要件（ユーザー数など）に対応できる設計か
   - [ ] 不要な機能やサービスが含まれていないか

   **BACKEND.md**
   - [ ] 必要なAPIエンドポイントの設計指針があるか
   - [ ] PROJECT.md のビジネスロジックを実現できる構成か
   - [ ] 元プロジェクト固有の記述が残っていないか

   **FRONTEND.md**
   - [ ] PROJECT.md の画面一覧に対応するコンポーネント設計があるか
   - [ ] ターゲットユーザーに適したUI/UX指針があるか
   - [ ] 不要なページやコンポーネントの記述がないか

   **AUTH.md**
   - [ ] PROJECT.md のユーザー種別に対応した認証設計か
   - [ ] 必要な認証方式（メール、OAuth等）が網羅されているか
   - [ ] 権限設計が機能要件と整合しているか

   **DATABASE.md**
   - [ ] 機能要件を実現するデータモデルの指針があるか
   - [ ] 元プロジェクト固有のテーブル記述が残っていないか

   **TEST.md**
   - [ ] 機能要件の受け入れ条件をテストできる戦略か
   - [ ] E2Eテストの対象画面が PROJECT.md と一致しているか

4. **不整合レポートの作成**
   以下の形式で不整合を報告する：

   ```
   ## 整合性チェック結果

   ### 適合している項目
   - [x] 項目1
   - [x] 項目2

   ### 要修正項目
   | ファイル | 問題点 | 推奨アクション |
   |----------|--------|----------------|
   | BACKEND.md | LINE Bot関連の記述が残存 | 該当セクションを削除 |

   ### 追加が必要な項目
   - 項目と理由
   ```

5. **修正の実行**
   - ユーザーに修正内容を確認する
   - 承認された項目について修正を実行する
   - 各修正後に変更内容を報告する

6. **最終確認**
   - 修正後のドキュメント一覧を表示する
   - 残っている課題があれば報告する

**リファレンス**
- `CLAUDE.md` の禁止事項を確認し、ドキュメントがこれに違反していないか確認する
- 元プロジェクト固有の記述（LINE、予約管理、相談機能など）は削除対象として特定する
- Prisma スキーマ（`prisma/schema.prisma`）との整合性も確認する
